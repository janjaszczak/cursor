---
description: FastAPI + Pydantic v2 + Alembic workflow
globs:
  - "backend/**"
alwaysApply: false
---
Use FastAPI with Pydantic v2 for request/response validation and OpenAPI.
Keep handlers thin; move logic into services with unit tests (pytest). Use Depends for DI.
Write idempotent Alembic migrations for *every* schema change; include upgrade/downgrade.
Stdlib `logging` with request id and key fields.
For ETL/parsers, stream file-by-file. Log invalid records to CSV (timestamp,file,line,error,original row).
Provide example curl/httpie requests and expected responses for each new endpoint.
